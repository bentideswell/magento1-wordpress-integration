<?xml version="1.0"?>
<layout>
<!--
/**
 * @category    	Fishpig
 * @package     Fishpig_Wordpress
 * @license     	http://fishpig.co.uk/license.txt
 * @author      	Ben Tideswell <help@fishpig.co.uk>
 * 
 * DO NOT EDIT THIS FILE!
 * To make layout changes to the blog, create a file named local.xml
 * in your custom package/theme/layout directory and make changes there.
 * Editing this file will make upgrading harder
 *
 */
-->
	<default>
		<!-- 
		/**
		 * The below adds in the top link for the blog.
		 * To remove this link, do not delete the code below.
		 * Instead, you can disable (or rename) this link from the extension's configuration
		 * section in the Magento Admin
		 *
		 */
		 -->
		<reference name="top.links">
			<action method="addLink" translate="label title" module="wordpress" ifconfig="wordpress/toplink/enabled">
				<label helper="wordpress/getTopLinkLabel" />
				<url helper="wordpress/getTopLinkUrl"/>
				<title>Blog</title>
				<prepare>0</prepare>
				<urlParams />
				<position helper="wordpress/getTopLinkPosition" />
				<li_params />
				<a_params>class="top-link-blog"</a_params>
			</action>
		</reference>
		<!--  End of add top 'Blog' link -->
	</default>
	<!--
	/**
	 * Default styles for all WordPress pages
	 */
	-->
	<wordpress_default>
		<reference name="root">
			<action method="setTemplate"><template>page/2columns-left.phtml</template></action>
		</reference>
		<reference name="head">
			<action method="addCss" ifconfig="wordpress/misc/include_css"><style>wordpress/styles.css</style></action>
			<action method="addJs"><script>fishpig/wordpress/search.js</script></action>
			<!--
			<action method="addJs"><script>fishpig/wordpress/lightbox.js</script></action>
			-->
		</reference>
		<reference name="left">
			<action method="unsetChildren" ifconfig="wordpress/misc/sidebar_left_empty" />
			<block type="wordpress/sidebar" name="wordpress_sidebar_left" as="wp.sidebar.left" before="-">
				<action method="setWidgetArea"><area>sidebar-1</area></action>
				<!--<action method="setWidgetArea"><area>left</area></action>-->
			</block>
		</reference>
		<reference name="sidebar">
			<action method="unsetChildren" ifconfig="wordpress/misc/sidebar_left_empty" />
			<block type="wordpress/sidebar" name="wordpress_sidebar_sidebar" as="wp.sidebar.left" before="-">
				<action method="setWidgetArea"><area>sidebar-1</area></action>
				<!--<action method="setWidgetArea"><area>sidebar</area></action>-->
			</block>
		</reference>
		<reference name="right">
			<action method="unsetChildren" ifconfig="wordpress/misc/sidebar_right_empty" />
			<block type="wordpress/sidebar" name="wordpress_sidebar_right" as="wp.sidebar.right" before="-">
				<action method="setWidgetArea"><area>sidebar-2</area></action>
				<!--<action method="setWidgetArea"><area>right</area></action>-->
			</block>
		</reference>
	</wordpress_default>
	<!--
	/**
	 * WordPress Homepage
	 *
	 */
	-->
	<wordpress_homepage>
		<reference name="content">
			<block type="wordpress/homepage" name="wordpress_homepage" as="wp.home" template="wordpress/homepage.phtml">
				<block type="wordpress/post_list" name="wordpress_post_list" as="post_list" template="wordpress/post/list.phtml">
					<block type="core/text_list" name="post.content.before" as="before_post_content" />
					<block type="core/text_list" name="post.content.after" as="after_post_content">
						<block type="wordpress/post_meta" name="post.view.meta" as="meta" after="-" template="wordpress/post/meta.phtml" />
					</block>
				</block>
			</block>
		</reference>
	</wordpress_homepage>
	<!--
	/**
	 * WordPress Term Page
	 *
	 */
	 -->
	<wordpress_term_view>
		<reference name="content">
			<block type="wordpress/term_view" name="wp.term" template="wordpress/term/view.phtml">
				<block type="wordpress/post_list" name="wordpress_post_list" as="post_list" template="wordpress/post/list.phtml">
					<block type="core/text_list" name="post.content.before" as="before_post_content" />
					<block type="core/text_list" name="post.content.after" as="after_post_content">
						<block type="wordpress/post_meta" name="post.view.meta" as="meta" after="-" template="wordpress/post/meta.phtml" />
					</block>
				</block>
			</block>
		</reference>
	</wordpress_term_view>
	<!--
	/**
	 * WordPress Search results
	 *
	 */
	 -->
	<wordpress_search_index>
		<reference name="content">
			<block type="wordpress/search_result" name="wp.search.result" template="wordpress/search/result.phtml">
				<block type="wordpress/post_list" name="wordpress_post_list" as="post_list" template="wordpress/post/list.phtml">
					<block type="core/text_list" name="post.content.before" as="before_post_content" />
					<block type="core/text_list" name="post.content.after" as="after_post_content">
						<block type="wordpress/post_meta" name="post.view.meta" as="meta" after="-" template="wordpress/post/meta.phtml" />
					</block>
				</block>
			</block>
		</reference>
	</wordpress_search_index>	
	<!--
	/**
	 * Blog archive page
	 * This applies to archives based on the month or the day
	 *
	 */
	 -->
	<wordpress_archive_view>
		<reference name="content">
			<block type="wordpress/archive_view" name="wordpress_archive" template="wordpress/archive/view.phtml">
				<block type="wordpress/post_list" name="wordpress_post_list" as="post_list" template="wordpress/post/list.phtml">
					<block type="core/text_list" name="post.content.before" as="before_post_content" />
					<block type="core/text_list" name="post.content.after" as="after_post_content">
						<block type="wordpress/post_meta" name="post.view.meta" as="meta" after="-" template="wordpress/post/meta.phtml" />
					</block>
				</block>
			</block>
		</reference>
	</wordpress_archive_view>
	<!--
	/**
	 * Author page
	 *
	 */
	 -->
	<wordpress_author_view>
		<reference name="content">
			<block type="wordpress/author_view" name="wordpress_author" template="wordpress/author/view.phtml">
				<block type="wordpress/post_list" name="wordpress_post_list" as="post_list" template="wordpress/post/list.phtml">
					<block type="core/text_list" name="post.content.before" as="before_post_content" />
					<block type="core/text_list" name="post.content.after" as="after_post_content">
						<block type="wordpress/post_meta" name="post.view.meta" as="meta" after="-" template="wordpress/post/meta.phtml" />
					</block>
				</block>
			</block>
		</reference>
	</wordpress_author_view>
	<!--
	/**
	 * Blog post
	 *
	 */
	-->
	<wordpress_post_view>
		<reference name="content">
			<block type="wordpress/post_view" name="wp.post.view">
				<block type="core/text_list" name="post.content.before" as="before_post_content" />
				<block type="core/text_list" name="post.content.after" as="after_post_content">
					<block type="wordpress/post_meta" name="wp.post.view.meta" as="meta" after="-" template="wordpress/post/meta.phtml">
						<action method="setDisplayPreviousNextLinks"><display>1</display></action>
					</block>
				</block>
				<block type="wordpress/post_view_comment_wrapper" name="wp.post.view.comments" as="comments" template="wordpress/post/view/comment/wrapper.phtml">
					<block type="wordpress/post_view_comments" name="wp.post.view.comments.list" as="comment_list" template="wordpress/post/view/comments.phtml" />
					<block type="wordpress/post_view_comment_pager" name="wp.post.view.comments.pager" as="pager"/>
					<block type="wordpress/post_view_comment_form" name="wp.post.view.comments.form" as="form" template="wordpress/post/view/comment/form.phtml">
						<block type="core/text_list" name="wp.post.view.comments.form.before_end" as="before_form_end" />
					</block>
				</block>
			</block>
		</reference>
		<reference name="left">
			<block type="wordpress/post_associated_products" name="wp.associated.products.left" template="wordpress/post/associated/products.phtml" before="-">
				<action method="setTitle" translate="title" module="wordpress"><title><![CDATA[Related Products]]></title></action>
			</block>
		</reference>
		<reference name="sidebar">
			<block type="wordpress/post_associated_products" name="wp.associated.products.sidebar" template="wordpress/post/associated/products.phtml" before="-">
				<action method="setTitle" translate="title" module="wordpress"><title><![CDATA[Related Products]]></title></action>
			</block>
		</reference>
	</wordpress_post_view>
	<!--
	/**
	 * Non-WordPress pages
	 *
	 */
	-->
	<!--
	/**
	 * Magento product view page
	 * This displays any associated blog posts on the product page
	 *
	 */
	 -->
	<catalog_product_view>
		<reference name="product.info.additional">
			<block type="wordpress/post_associated" name="wordpress_posts_associated" template="wordpress/post/associated.phtml">
				<action method="setTitle" translate="title" module="wordpress"><title><![CDATA[Related Blog Posts]]></title></action>
				<action method="setEntity"><type><![CDATA[product]]></type></action>
				<!--<action method="setCount"><count>5</count></action>-->
			</block>
		</reference>
	</catalog_product_view>
	<!--
	/**
	 * CMS Pages
	 * This displays any associated blog posts on a CMS page
	 *
	 */
	 -->
	<cms_page>
		<reference name="content">
			<block type="wordpress/post_associated" name="wordpress_posts_associated" template="wordpress/post/associated.phtml" after="-">
				<action method="setTitle" translate="title" module="wordpress"><title><![CDATA[Related Blog Posts]]></title></action>
				<action method="setEntity"><type><![CDATA[cms_page]]></type></action>
			</block>
		</reference>
	</cms_page>
	<!--
	/**
	 * YARPP
	 *
	 */
	 -->
	<wordpress_post_view>
		<reference name="post.content.after">
			<block type="wp_addon_yarpp/sidebar_widget" name="wp.post.related" as="related_posts" before="wp.post.view.meta" template="wordpress-addons/yarpp/related.phtml" />
		</reference>
	</wordpress_post_view>
</layout>